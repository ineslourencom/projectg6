<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1561px" preserveAspectRatio="none" style="width:2569px;height:1561px;background:#FFFFFF;" version="1.1" viewBox="0 0 2569 1561" width="2569px" zoomAndPan="magnify"><defs><filter height="300%" id="f11k5gzfqc9sdc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="1336.1875" style="stroke:#A80036;stroke-width:1.0;" width="10" x="278" y="121.9609"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="365.125" style="stroke:#A80036;stroke-width:1.0;" width="10" x="637" y="152.3125"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="562.1406" style="stroke:#A80036;stroke-width:1.0;" width="10" x="637" y="865.6563"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="849" y="182.6641"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1070" y="272.625"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1070" y="972.9688"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="70.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1226" y="302.9766"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="70.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1226" y="1003.3203"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="15" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1474" y="358.6797"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1474" y="396.0313"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="15" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1474" y="1059.0234"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="284.7188" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1474" y="1112.7266"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1735" y="426.3828"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1857.5" y="896.0078"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="76.9609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2091.5" y="1246.7813"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2321.5" y="1143.0781"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="48.7031" style="stroke:#000000;stroke-width:2.0;" width="377.5" x="1156" y="317.9766"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="48.7031" style="stroke:#000000;stroke-width:2.0;" width="377.5" x="1156" y="1018.3203"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="68" x2="68" y1="89.6094" y2="1476.1484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="283" x2="283" y1="89.6094" y2="1476.1484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="642" x2="642" y1="89.6094" y2="1476.1484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="854" x2="854" y1="89.6094" y2="1476.1484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1075" x2="1075" y1="230.4688" y2="1476.1484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1231" x2="1231" y1="89.6094" y2="1476.1484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1478.5" x2="1478.5" y1="89.6094" y2="1476.1484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1740" x2="1740" y1="89.6094" y2="1476.1484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1862" x2="1862" y1="89.6094" y2="1476.1484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2096" x2="2096" y1="937.3125" y2="1476.1484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2326" x2="2326" y1="89.6094" y2="1476.1484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2485" x2="2485" y1="1288.0859" y2="1476.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="5" y="86.5332">Authenticated User</text><ellipse cx="68" cy="15" fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M68,23 L68,50 M55,31 L81,31 M68,50 L55,65 M68,50 L81,65 " fill="none" filter="url(#f11k5gzfqc9sdc)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="5" y="1489.6816">Authenticated User</text><ellipse cx="68" cy="1502.7578" fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M68,1510.7578 L68,1537.7578 M55,1518.7578 L81,1518.7578 M68,1537.7578 L55,1552.7578 M68,1537.7578 L81,1552.7578 " fill="none" filter="url(#f11k5gzfqc9sdc)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="225" y="86.5332">ResetPasswordUI</text><path d="M262.5,44 L262.5,68 M262.5,56 L279.5,56 " fill="none" filter="url(#f11k5gzfqc9sdc)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="291.5" cy="56" fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="225" y="1489.6816">ResetPasswordUI</text><path d="M262.5,1496.7578 L262.5,1520.7578 M262.5,1508.7578 L279.5,1508.7578 " fill="none" filter="url(#f11k5gzfqc9sdc)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="291.5" cy="1508.7578" fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="559" y="86.5332">ResetPasswordController</text><ellipse cx="642" cy="56" fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="638,44,644,39,642,44,644,49,638,44" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="559" y="1489.6816">ResetPasswordController</text><ellipse cx="642" cy="1508.7578" fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="638,1496.7578,644,1491.7578,642,1496.7578,644,1501.7578,638,1496.7578" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="815" y="86.5332">ITCompany</text><ellipse cx="854" cy="56" fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="842" x2="866" y1="70" y2="70"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="815" y="1489.6816">ITCompany</text><ellipse cx="854" cy="1508.7578" fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="842" x2="866" y1="1522.7578" y2="1522.7578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="994" y="1489.6816">iTCompany : ITCompany</text><ellipse cx="1075" cy="1508.7578" fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="1063" x2="1087" y1="1522.7578" y2="1522.7578"/><rect fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="126" x="1166" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="1173" y="74.5332">as : AccountStore</text><rect fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="126" x="1166" y="1475.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="1173" y="1496.6816">as : AccountStore</text><rect fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="85" x="1434.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1441.5" y="74.5332">a : Account</text><rect fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="85" x="1434.5" y="1475.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1441.5" y="1496.6816">a : Account</text><rect fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="62" x="1707" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="1714" y="74.5332">: Profile</text><rect fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="62" x="1707" y="1475.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="1714" y="1496.6816">: Profile</text><rect fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="155" x="1783" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="1790" y="74.5332">PasswordHashFactory</text><rect fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="155" x="1783" y="1475.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="1790" y="1496.6816">PasswordHashFactory</text><rect fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="285" x="1952" y="1475.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="271" x="1959" y="1496.6816">pHFactoryInstance : PasswordHashFactory</text><rect fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="147" x="2251" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="2258" y="74.5332">a.ph : PasswordHash</text><rect fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="147" x="2251" y="1475.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="2258" y="1496.6816">a.ph : PasswordHash</text><rect fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="143" x="2412" y="1475.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="2419" y="1496.6816">ph2 : PasswordHash</text><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="1336.1875" style="stroke:#A80036;stroke-width:1.0;" width="10" x="278" y="121.9609"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="365.125" style="stroke:#A80036;stroke-width:1.0;" width="10" x="637" y="152.3125"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="562.1406" style="stroke:#A80036;stroke-width:1.0;" width="10" x="637" y="865.6563"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="849" y="182.6641"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1070" y="272.625"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1070" y="972.9688"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="70.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1226" y="302.9766"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="70.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1226" y="1003.3203"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="15" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1474" y="358.6797"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1474" y="396.0313"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="15" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1474" y="1059.0234"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="284.7188" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1474" y="1112.7266"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1735" y="426.3828"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1857.5" y="896.0078"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="76.9609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2091.5" y="1246.7813"/><rect fill="#FFFFFF" filter="url(#f11k5gzfqc9sdc)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2321.5" y="1143.0781"/><polygon fill="#A80036" points="266,117.9609,276,121.9609,266,125.9609,270,121.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="68" x2="272" y1="121.9609" y2="121.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="75" y="117.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="86" y="117.1045">Open 'Reset Password' UI</text><polygon fill="#A80036" points="625,148.3125,635,152.3125,625,156.3125,629,152.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="288" x2="631" y1="152.3125" y2="152.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="295" y="147.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="245" x="306" y="147.4561">isNotVisitorProfile(email : String) : boolean</text><polygon fill="#A80036" points="837,178.6641,847,182.6641,837,186.6641,841,182.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="647" x2="843" y1="182.6641" y2="182.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="654" y="177.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="665" y="177.8076">iTCompany = getITCompany()</text><polygon fill="#A80036" points="982,209.0156,992,213.0156,982,217.0156,986,213.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="854" x2="988" y1="213.0156" y2="213.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="861" y="208.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="872" y="208.1592">new ITCompany()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="994" y="237.1973">iTCompany : ITCompany</text><ellipse cx="1075" cy="206.6641" fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="1063" x2="1087" y1="220.6641" y2="220.6641"/><polygon fill="#A80036" points="1058,268.625,1068,272.625,1058,276.625,1062,272.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="647" x2="1064" y1="272.625" y2="272.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="654" y="267.7686">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="665" y="267.7686">as = getAccountStore()</text><polygon fill="#A80036" points="1214,298.9766,1224,302.9766,1214,306.9766,1218,302.9766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="647" x2="1220" y1="302.9766" y2="302.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="654" y="298.1201">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="665" y="298.1201">a = findAccountByEmail(email : String)</text><path d="M1156,317.9766 L1229,317.9766 L1229,325.9766 L1219,335.9766 L1156,335.9766 L1156,317.9766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:2.0;" width="377.5" x="1156" y="317.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1171" y="332.4717">loop</text><polygon fill="#A80036" points="1462,354.6797,1472,358.6797,1462,362.6797,1466,358.6797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1236" x2="1468" y1="358.6797" y2="358.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1243" y="353.8232">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="1254" y="353.8232">isAccountEqualTo(email) : boolean</text><polygon fill="#A80036" points="1462,392.0313,1472,396.0313,1462,400.0313,1466,396.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="647" x2="1468" y1="396.0313" y2="396.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="654" y="391.1748">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="665" y="391.1748">isNotVisitorProfile() : boolean</text><polygon fill="#A80036" points="1723,422.3828,1733,426.3828,1723,430.3828,1727,426.3828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1484" x2="1729" y1="426.3828" y2="426.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1491" y="421.5264">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="1502" y="421.5264">checkIfVisitor() : boolean</text><polygon fill="#A80036" points="1495,452.7344,1485,456.7344,1495,460.7344,1491,456.7344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1489" x2="1739" y1="456.7344" y2="456.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1501" y="451.8779">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="1519" y="451.8779">true</text><polygon fill="#A80036" points="658,483.0859,648,487.0859,658,491.0859,654,487.0859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="652" x2="1478" y1="487.0859" y2="487.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="664" y="482.2295">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="682" y="482.2295">true</text><polygon fill="#A80036" points="299,513.4375,289,517.4375,299,521.4375,295,517.4375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="293" x2="641" y1="517.4375" y2="517.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="305" y="512.5811">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="323" y="512.5811">true</text><polygon fill="#A80036" points="79,560.1406,69,564.1406,79,568.1406,75,564.1406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="73" x2="277" y1="564.1406" y2="564.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="85" y="551.1084">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="103" y="542.9326">show 'Reset Password' UI</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="107" y="559.2842">and ask for old password</text><polygon fill="#A80036" points="266,590.4922,276,594.4922,266,598.4922,270,594.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="68" x2="272" y1="594.4922" y2="594.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="75" y="589.6357">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="93" y="589.6357">input old password</text><polygon fill="#A80036" points="79,620.8438,69,624.8438,79,628.8438,75,624.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="73" x2="277" y1="624.8438" y2="624.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="85" y="619.9873">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="103" y="619.9873">ask for new password</text><polygon fill="#A80036" points="266,651.1953,276,655.1953,266,659.1953,270,655.1953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="68" x2="272" y1="655.1953" y2="655.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="75" y="650.3389">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="93" y="650.3389">input new password</text><line style="stroke:#A80036;stroke-width:1.0;" x1="288" x2="330" y1="685.5469" y2="685.5469"/><line style="stroke:#A80036;stroke-width:1.0;" x1="330" x2="330" y1="685.5469" y2="698.5469"/><line style="stroke:#A80036;stroke-width:1.0;" x1="289" x2="330" y1="698.5469" y2="698.5469"/><polygon fill="#A80036" points="299,694.5469,289,698.5469,299,702.5469,295,698.5469" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="295" y="680.6904">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="313" y="680.6904">validate password rules</text><polygon fill="#A80036" points="79,724.8984,69,728.8984,79,732.8984,75,728.8984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="73" x2="277" y1="728.8984" y2="728.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="85" y="724.042">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="103" y="724.042">ask to confirm new password</text><polygon fill="#A80036" points="266,755.25,276,759.25,266,763.25,270,759.25" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="68" x2="272" y1="759.25" y2="759.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="75" y="754.3936">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="93" y="754.3936">input new password again</text><line style="stroke:#A80036;stroke-width:1.0;" x1="288" x2="330" y1="805.9531" y2="805.9531"/><line style="stroke:#A80036;stroke-width:1.0;" x1="330" x2="330" y1="805.9531" y2="818.9531"/><line style="stroke:#A80036;stroke-width:1.0;" x1="289" x2="330" y1="818.9531" y2="818.9531"/><polygon fill="#A80036" points="299,814.9531,289,818.9531,299,822.9531,295,818.9531" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="295" y="792.9209">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="313" y="784.7451">check confirmed password is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="317" y="801.0967">the same as new password</text><polygon fill="#A80036" points="625,861.6563,635,865.6563,625,869.6563,629,865.6563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="288" x2="631" y1="865.6563" y2="865.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="295" y="852.624">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="313" y="844.4482">changePassword(email : String, oldPassword : String,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="317" y="860.7998">newPassword : String) : boolean</text><polygon fill="#A80036" points="1845.5,892.0078,1855.5,896.0078,1845.5,900.0078,1849.5,896.0078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="647" x2="1851.5" y1="896.0078" y2="896.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="654" y="891.1514">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="672" y="891.1514">pHFactoryInstance = getInstance()</text><polygon fill="#A80036" points="1940,922.3594,1950,926.3594,1940,930.3594,1944,926.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1862.5" x2="1946" y1="926.3594" y2="926.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1869.5" y="921.5029">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="1887.5" y="921.5029">create</text><rect fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="285" x="1952" y="904.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="271" x="1959" y="925.541">pHFactoryInstance : PasswordHashFactory</text><polygon fill="#A80036" points="1058,968.9688,1068,972.9688,1058,976.9688,1062,972.9688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="647" x2="1064" y1="972.9688" y2="972.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="654" y="968.1123">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="672" y="968.1123">as = getAccountStore()</text><polygon fill="#A80036" points="1214,999.3203,1224,1003.3203,1214,1007.3203,1218,1003.3203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="647" x2="1220" y1="1003.3203" y2="1003.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="654" y="998.4639">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="672" y="998.4639">a = findAccountByEmail(email : String)</text><path d="M1156,1018.3203 L1229,1018.3203 L1229,1026.3203 L1219,1036.3203 L1156,1036.3203 L1156,1018.3203 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:2.0;" width="377.5" x="1156" y="1018.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1171" y="1032.8154">loop</text><polygon fill="#A80036" points="1462,1055.0234,1472,1059.0234,1462,1063.0234,1466,1059.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1236" x2="1468" y1="1059.0234" y2="1059.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1243" y="1054.167">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="1261" y="1054.167">isAccountEqualTo(email) : boolean</text><polygon fill="#A80036" points="1462,1108.7266,1472,1112.7266,1462,1116.7266,1466,1112.7266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="647" x2="1468" y1="1112.7266" y2="1112.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="654" y="1099.6943">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="348" x="672" y="1091.5186">resetPassword(oldPassword : String, newPassword : String,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="313" x="684" y="1107.8701">pHFactoryInstance : PasswordHashFactory) : boolean</text><polygon fill="#A80036" points="2309.5,1139.0781,2319.5,1143.0781,2309.5,1147.0781,2313.5,1143.0781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1484" x2="2315.5" y1="1143.0781" y2="1143.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1491" y="1138.2217">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="280" x="1509" y="1138.2217">true = isMatchPassword(oldPassword) : boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1484" x2="1526" y1="1203.4297" y2="1203.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1526" x2="1526" y1="1203.4297" y2="1216.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1485" x2="1526" y1="1216.4297" y2="1216.4297"/><polygon fill="#A80036" points="1495,1212.4297,1485,1216.4297,1495,1220.4297,1491,1216.4297" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1491" y="1198.5732">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="1509" y="1198.5732">true = [oldPassword != newPassword]</text><polygon fill="#A80036" points="2079.5,1242.7813,2089.5,1246.7813,2079.5,1250.7813,2083.5,1246.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1484" x2="2085.5" y1="1246.7813" y2="1246.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1491" y="1241.9248">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="1509" y="1241.9248">createPasswordHash(newPassword)</text><polygon fill="#A80036" points="2400,1273.1328,2410,1277.1328,2400,1281.1328,2404,1277.1328" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2101.5" x2="2406" y1="1277.1328" y2="1277.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="2108.5" y="1272.2764">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="2126.5" y="1272.2764">create</text><rect fill="#FEFECE" filter="url(#f11k5gzfqc9sdc)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="143" x="2412" y="1254.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="2419" y="1276.3145">ph2 : PasswordHash</text><polygon fill="#A80036" points="1495,1319.7422,1485,1323.7422,1495,1327.7422,1491,1323.7422" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1489" x2="2095.5" y1="1323.7422" y2="1323.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1501" y="1318.8857">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="1519" y="1318.8857">ph2</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1484" x2="1526" y1="1354.0938" y2="1354.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1526" x2="1526" y1="1354.0938" y2="1367.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1485" x2="1526" y1="1367.0938" y2="1367.0938"/><polygon fill="#A80036" points="1495,1363.0938,1485,1367.0938,1495,1371.0938,1491,1367.0938" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1491" y="1349.2373">33</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="1509" y="1349.2373">a.passwordHash = ph2</text><polygon fill="#A80036" points="658,1393.4453,648,1397.4453,658,1401.4453,654,1397.4453" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="652" x2="1478" y1="1397.4453" y2="1397.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="664" y="1392.5889">34</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="682" y="1392.5889">true</text><polygon fill="#A80036" points="299,1423.7969,289,1427.7969,299,1431.7969,295,1427.7969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="293" x2="641" y1="1427.7969" y2="1427.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="305" y="1422.9404">35</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="323" y="1422.9404">operation successful</text><polygon fill="#A80036" points="79,1454.1484,69,1458.1484,79,1462.1484,75,1458.1484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="73" x2="282" y1="1458.1484" y2="1458.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="85" y="1453.292">36</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="103" y="1453.292">operation successful</text><!--MD5=[5753ee10c237b9906efd845aa4e1d3eb]
@startuml
actor "Authenticated User" as user
boundary "ResetPasswordUI" as UI
control "ResetPasswordController" as Controller
entity "ITCompany" as ITCompany
entity "iTCompany : ITCompany" as itc
participant "as : AccountStore" as accstore
participant "a : Account" as acc
participant ": Profile" as prof
participant "PasswordHashFactory" as phfactory
participant "pHFactoryInstance : PasswordHashFactory" as pHFactoryInstance
participant "a.ph : PasswordHash" as passhash
participant "ph2 : PasswordHash" as passhash2

autonumber
user -> UI : Open 'Reset Password' UI
activate UI
UI -> Controller : isNotVisitorProfile(email : String) : boolean
activate Controller
Controller -> ITCompany : iTCompany = getITCompany()
activate ITCompany
ITCompany -> itc ** : new ITCompany()
deactivate ITCompany
Controller -> itc : as = getAccountStore()
activate itc
Controller -> accstore : a = findAccountByEmail(email : String)
deactivate itc
activate accstore
loop
    accstore -> acc : isAccountEqualTo(email) : boolean
    activate acc
end
deactivate accstore
deactivate acc
Controller -> acc : isNotVisitorProfile() : boolean
activate acc
acc -> prof : checkIfVisitor() : boolean
activate prof
prof - -> acc : true
deactivate prof
acc - -> Controller : true
deactivate acc
Controller - -> UI : true
deactivate Controller
UI - -> user : show 'Reset Password' UI\n and ask for old password

user -> UI : input old password
UI - -> user : ask for new password
user -> UI : input new password
UI -> UI : validate password rules
UI - -> user : ask to confirm new password
user -> UI : input new password again
UI -> UI : check confirmed password is\n the same as new password

UI - -> Controller : changePassword(email : String, oldPassword : String,\n newPassword : String) : boolean
activate Controller
Controller -> phfactory : pHFactoryInstance = getInstance()
activate phfactory
phfactory -> pHFactoryInstance ** : create
deactivate phfactory
Controller -> itc : as = getAccountStore()
activate itc
Controller -> accstore : a = findAccountByEmail(email : String)
deactivate itc
activate accstore
loop
    accstore -> acc : isAccountEqualTo(email) : boolean
    activate acc
end
deactivate accstore
deactivate acc
Controller -> acc : resetPassword(oldPassword : String, newPassword : String,\n   pHFactoryInstance : PasswordHashFactory) : boolean
activate acc

acc -> passhash : true = isMatchPassword(oldPassword) : boolean
activate passhash
deactivate passhash

acc -> acc : true = [oldPassword != newPassword]

acc -> pHFactoryInstance : createPasswordHash(newPassword)
activate pHFactoryInstance
pHFactoryInstance -> passhash2 ** : create
pHFactoryInstance - -> acc : ph2
deactivate pHFactoryInstance

acc -> acc : a.passwordHash = ph2

acc - -> Controller : true
deactivate acc
Controller - -> UI : operation successful

deactivate Controller
UI - -> user : operation successful
deactivate UI
@enduml

PlantUML version 1.2022.1(Tue Feb 01 18:19:58 GMT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: GB
--></g></svg>